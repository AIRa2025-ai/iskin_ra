<!DOCTYPE html>
<html>
<head>
  <title>Ra Nervous System</title>
  <style>
    body { background:#0b0f14; color:#9df; font-family:monospace; }
    .event { border-bottom:1px solid #223; padding:4px; }
    .ok { color:#7f7 }
    .warn { color:#ff7 }
    .err { color:#f77 }
  </style>
</head>
<body>
<h1>üúÇ Ra Nervous System Monitor</h1>
<div>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: <span id="mood"></span></div>
<div>–ù–∞–≥—Ä—É–∑–∫–∞: <span id="load"></span></div>
<div>–°–æ–±—ã—Ç–∏–π/—Å–µ–∫: <span id="events_per_sec"></span></div>
<div>–û—à–∏–±–∫–∏: <span id="errors"></span></div>
<div>–ú—ã—Å–ª—å: <span id="thought"></span></div>
<hr>
<div id="events"></div>

<script>
const ws = new WebSocket("ws://localhost:8000/ws/events");

ws.onmessage = (e) => {
  const data = JSON.parse(e.data);
  const div = document.createElement("div");
  div.className = "event";
  div.innerText = `[${data.time}] ${data.source} ‚Üí ${data.type}`;
  document.getElementById("events").prepend(div);
};

async function updateState() {
  const res = await fetch('/api/state');
  const data = await res.json();

  console.log("STATE:", data);
}

setInterval(updateState, 1000);
</script>
</body>
</html>
